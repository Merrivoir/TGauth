<!DOCTYPE html>
<html>
<head>
    <title>Авторизация</title>
    <script>
        const params = new URLSearchParams(window.location.search);
        const source = params.get('source') || 'https://richmom.vercel.app';
        console.log(source)
    </script>
</head>
<body>
    <h1>Вход через Telegram</h1>
    <div id="telegram-widget">
        <script async src="https://telegram.org/js/telegram-widget.js?22"
            data-telegram-login="richmom_auth_bot"
            data-size="large"
            data-radius="8"
            data-auth-url="http://richmom.vercel.app/auth?source=${encodeURIComponent(source)}"`
            data-request-access="write">
        </script>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const params = new URLSearchParams(window.location.search);
                const source = params.get('source') || 'https://richmom.vercel.app';
                console.log(source)
                const widget = document.createElement('script');
                widget.async = true;
                widget.src = 'https://telegram.org/js/telegram-widget.js?22';
                widget.dataset.telegramLogin = 'richmom_auth_bot';
                widget.dataset.authUrl = `https://richmom.vercel.app/auth?source=${source}`;
                document.body.appendChild(widget);
            });
        </script>
    </div>
</body>
</html>